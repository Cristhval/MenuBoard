{% extends "base.html" %}

{% block title %}Detalle del Pedido {{ pedido.numero }}{% endblock %}

{% block content %}
<h1>Detalle del Pedido {{ pedido.numero }}</h1>
<p><strong>Cliente:</strong> {{ pedido.cliente.nombre }}</p>
<p><strong>Fecha:</strong> {{ pedido.fecha }}</p>
<p><strong>Estado:</strong> {{ pedido.estado }}</p>

<h2>Productos en el Pedido:</h2>
<table>
    <tr>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Precio Unitario</th>
        <th>Subtotal</th>
        <th>Subtotal con Impuestos</th>
    </tr>
    {% for item in items %}
    <tr>
        <td>{{ item.producto.nombre }}</td>
        <td>{{ item.cantidad }}</td>
        <td>{{ item.precio_unitario }}</td>
        <td>{{ item.subtotal }}</td>
        <td>{{ item.subtotal_con_impuestos }}</td>
    </tr>
    {% endfor %}
</table>

<h3>Totales:</h3>
<p><strong>Total sin impuestos:</strong> {{ total_pedido }}</p>
<p><strong>Total con impuestos:</strong> {{ total_con_impuestos }}</p>

<a href="{% url 'listar_pedidos' %}">Volver a la lista de pedidos</a>
{% endblock %}
