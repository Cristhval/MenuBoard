{% extends "base.html" %}

{% block title %}Historial de Facturas{% endblock %}

{% block content %}
<h1>Historial de Facturas</h1>

<form method="get" action="{% url 'filtrar_historial' %}">
    <label for="cliente">Cliente:</label>
    <input type="text" id="cliente" name="cliente" value="{{ cliente }}">

    <label for="fecha_inicio">Fecha Inicio:</label>
    <input type="date" id="fecha_inicio" name="fecha_inicio" value="{{ fecha_inicio }}">

    <label for="fecha_fin">Fecha Fin:</label>
    <input type="date" id="fecha_fin" name="fecha_fin" value="{{ fecha_fin }}">

    <label for="monto_total">Monto Total:</label>
    <select id="monto_total" name="monto_total">
        <option value="">Seleccionar</option>
        <option value="<50" {% if monto_total == '<50' %}selected{% endif %}>Menor a $50</option>
        <option value="50-100" {% if monto_total == '50-100' %}selected{% endif %}>Entre $50 y $100</option>
        <option value=">100" {% if monto_total == '>100' %}selected{% endif %}>Mayor a $100</option>
    </select>

    <button type="submit">Filtrar</button>
</form>

<table>
    <thead>
        <tr>
            <th># Factura</th>
            <th>Cliente</th>
            <th>Fecha</th>
            <th>Total</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for factura in facturas %}
        <tr>
            <td>{{ factura.numero }}</td>
            <td>{{ factura.pedido.cliente.nombre }}</td>
            <td>{{ factura.fecha }}</td>
            <td>${{ factura.total }}</td>
            <td><a href="{% url 'detalle_factura' factura.numero %}">Ver Detalle</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
